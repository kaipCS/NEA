for filter validation need to use isset rather than empty

header not working beacuse was printing stuff to test

prepared statement was difficult for sql with arrays so did not do this, no risk of sql injection as all textboxes except from years which I will change to only allow numerical entry

was leaving one or two of areas empty then checking in sql producing error so made into one big list of topics as the area is not important for this bit 

after testing using the filters, issues seemed to arise from the POST or the session being too long

in fact it is that sql query length is too logn which makes sense as when outputing messages to trace code the issues arised at sql statement
after doing some research, I found that I could seperate into chunks and merge the result

I tested this by attempting to select all questions
however when I did that onyl 885 where in list so something had gone wrong

for example, question id 10 is the first not included
it has the topic work so I selected this filter as only one question is mentioned with it, only one with it which agrees with the questions table, this did correctly output this


        $chunks = array_chunk($topics, 100);
        foreach ($chunks as $chunk) {
            $topicsList = "'" . implode("','", $chunk) . "'";
            $stmt = $conn->query("SELECT questionid FROM questions WHERE (year <= $to AND year >= $from) AND (paper IN ($papersList)) AND topic IN ($topicsList)");
            
        while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
            $questions[] = $row["questionid"];   
        }

        print_r($questions);
        }

Complex Numbers vs Complex Numbers

all topics are definatly sent 

printing chunks showed that they did not cover all topics - just the first 200

printing chunks before sql showed that they are all included properly so issue in the sql

now works just not in order because of the chunks which is why cut off weridly at the start

removing all the printing allowed redirection and printing session showed correct

issue when selecting pure, for example, and getting applied questions with those same topics **
-> to fix I will make a list of selected areas and then topics which are not in areas so will make correct search and also more effient, still need to chunk in case of extreame case
not working as areas is imploding as a string not number as in database
still not working so echo $sql; to check - not printing anythign suggestign not even getting to sql before error
never entering loop as  $topics is empty - enter dummy topic into list to work
merging doesnt work on empty so added else if
testing with no full topics didnt work: as trying to acess empty post
chunks were not working is not exactly 100 in size so last one (and if one like in case above, not at all)
it is not this but one gets missed from every chunk due to "topics" added initally
does get rid of one as expected by does not fix problem
printing shows apostraphe in topics ending sql query: flipped round use of double vs single speech marks


issue where selecting one pure topic selects every pure topic
in fact, whatever happens all pure are selected - is this a data type issue because pure is 0: yes so concanated differently
now only selecting step 1 despite told otherwise, may just be a cache issue with testing and reloading many times: yes this way the case


when doing exlcluding for step I pure - include some mech questions?/ same thing for not excluding, clearly filtering is going wrong ** 

echo "
                        <div class='button question-row' onclick=\"window.location.href='display-question.php?id={$row['questionid']}'\">
                            STEP $paper {$row['year']} {$row['topic']}
                            <div class='grey-text'>$keywordList</div>
                        </div>
                        <br>
                        ";
had to concanate differently as the html was not working when split up 

had to do research for this   to realod with value in search bar  <script>
    function sortQuestions(sortValue) {
        window.location.href = window.location.pathname + '?sort=' + sortValue;
    }
    </script>

to add just added straight latex into the webpage using research from earlier 
Got error about questions parts
Things initalised at the start of step papers needed to be at the start of mine aswell so looked back at raw papers from step database wesbite

when testing without using questions parts, the lines are cut off

with question parts need to enurmate so code to alter these bits

svg vs chtml fixes it which uses an image rather than html

issue of not keeping filters when reloading for displaying questions

    <div id="question-preview" class="col-sm-4">
        <div id ="latex-question">
            <?php
                if (isset($_SESSION["display-code"])){
                    echo($_SESSION["display-code"]);
                }
                else{
                    echo("Select a question to view it ");
                }
                unset($_SESSION["display-code"]);
            ?>
        </div>

    </div>

cannot resolve without major changes

move onto fixing questions parts issue

now i need to go through a sample to check for other latex package issues - i can see many arrising from tikz so will especially check geomety questions
for testing make page where can see all questions

using text area rather than text for notes input

last thing to do: debug the late

impossible to get the diagrams to work so had to use as images - seemed like all used \begin{center} so searched the database and downloaded images

ask RIC if okay if just rpoof of concept: only fix question parts as affect majoirty and that is neccesary and images as the pdf builder should work fine with this being only issue

sorting not working for result of search